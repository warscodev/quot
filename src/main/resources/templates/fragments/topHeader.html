<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<!-- 헤더 네비바 -->
<header id="mainHeader" class="main-header d-flex align-items-center" th:fragment="topHeader">
    <div class="container-xl d-flex justify-content-between main-header-container align-items-center">
        <div class="d-flex align-items-center">
            <!-- 로고 -->
            <a href="/">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="mainLogo" x="0" y="0" version="1.1" viewBox="0 0 210 70"><style>.st0{enable-background:new}.st1{fill:#222}.st2{fill:#222}.st3{fill:#666666}</style><g class="st0"><path d="M46.8 35c-1.6.4-3.6.8-5.9 1.2-2.3.4-4.7.7-7.1 1v8.3c0 2.4-.3 4.5-1 6.2-.6 1.8-1.3 3-2.1 3.8l-2.2-.4c.1-.5.2-1.1.3-1.8.1-.7.2-1.5.2-2.4.1-.8.1-1.7.1-2.7 0-.9.1-1.8.1-2.6v-8c-1.4.2-2.7.3-3.8.3-1 .1-2 .2-2.9.3-.9.2-1.6.2-2 .2-.2 0-.5-.1-1-.2-.5-.2-.9-.4-1.4-.6s-1-.5-1.5-.8c-.5-.3-.9-.5-1.2-.7 0-.5.1-.9.2-1.3.2-.4.4-.6.6-.6h.5c.3 0 .7.1 1.1.1.4.1.9.1 1.4.2.5 0 1 .1 1.5.1h3.5c1.6-.1 3.6-.2 5.9-.3 2.3-.2 4.6-.4 6.9-.7.3-1.1.5-2.3.7-3.6.2-1.3.4-2.6.6-4-2 .5-4 .8-6.2 1.1-2.2.3-4.1.5-5.8.8-.9.1-1.6.2-2.1.4-.5.1-.9.2-1.2.2-.2 0-.4-.1-.8-.2s-.8-.3-1.2-.5c-.5-.2-.9-.3-1.3-.5s-.6-.2-.7-.3c0-.5.1-.9.2-1.2.2-.4.3-.5.5-.5h1.4c.3 0 .7 0 1 .1h2.3c.6 0 1.2 0 1.8-.1.8 0 1.7-.1 2.8-.2 1-.1 2.1-.2 3.2-.3 1.1-.1 2.2-.3 3.4-.5 1.1-.2 2.2-.4 3.2-.6.1-1.5.2-3.1.3-4.6h-9.9c-.8 0-1.6.1-2.3.2-.7.2-1.3.2-2 .2-.3 0-.8-.1-1.2-.3l-1.5-.6c-.5-.2-.9-.4-1.3-.7-.4-.2-.6-.4-.7-.4 0-.1 0-.3.1-.5s.1-.5.2-.7c.1-.2.1-.4.2-.6.1-.2.2-.2.3-.2h1.1c.6 0 1.3.1 2.1.1.8.1 1.6.1 2.5.1.9 0 1.8.1 2.6.1h7.4c.6 0 1.3-.1 2-.2.7-.2 1.2-.2 1.5-.2h.8c.3 0 .6.1.9.1.3 0 .6.1.9.2.3.1.5.1.6.2.6.2.8.5.8 1-.1 1.3-.2 2.6-.4 4.1s-.5 3-.8 4.5-.6 2.9-1 4.2c-.4 1.4-.7 2.5-1.1 3.5 1-.2 2-.3 2.9-.5.9-.2 1.8-.3 2.5-.5.2.2.3.5.4 1.2 0 .6.1 1.1.1 1.6zm7.9-23.7c.3.1.4.3.5.4.1.2.1.4.1.6 0 .3 0 .7-.1 1.3-.1.6-.1 1.1-.1 1.5L55 49.8c0 .9-.1 1.7-.2 2.6-.1.9-.3 1.7-.4 2.5-.2.8-.3 1.4-.5 2-.2.6-.4 1-.6 1.3h-1.8c-.1-.2-.3-.6-.4-1.1-.1-.5-.2-1-.3-1.7-.1-.6-.1-1.3-.2-2s-.1-1.4-.1-2.1v-7l-5.3.1c-.3 0-.8.1-1.5.2-.7.2-1.2.2-1.5.2-.2 0-.4-.1-.8-.2s-.7-.3-1.1-.5l-1.2-.6c-.4-.2-.7-.4-.9-.6 0-.5.1-.9.2-1.2.1-.3.3-.5.5-.5h.8c.5 0 1 .1 1.6.1h3.9l5.3-.1V15c0-.3-.1-.6-.2-.8-.1-.2-.3-.4-.5-.5L47 11.5c.1-.4.2-.8.4-1.2.2-.4.5-.6.7-.6.3 0 .7.1 1.3.2.6.1 1.2.2 1.8.4.6.1 1.2.3 1.8.5.9.2 1.4.4 1.7.5z" class="st1"/></g><g class="st0"><path d="M180 17.4c.3.1.6.2.8.4.2.2.3.4.3.7 0 .2 0 .4-.1.7-.1.3-.2.6-.2.8-1 3.4-2.3 6.6-3.9 9.5-1.7 3-3.5 5.6-5.6 7.9-2.1 2.3-4.3 4.2-6.6 5.8-2.3 1.6-4.7 2.6-7 3.2-.3 0-.5-.1-.8-.3s-.6-.4-.8-.6c-.2-.2-.4-.5-.5-.6-.1-.2 0-.3.2-.4 1.2-.4 2.5-1 3.8-1.8 1.4-.8 2.7-1.9 4.1-3.1 1.4-1.2 2.7-2.6 4-4.2 1.3-1.6 2.5-3.3 3.6-5.2l-8.6.9c-.3 0-.6.1-1 .2s-.8.2-1 .2c-.3 0-.7-.1-1.2-.2-.5-.2-1-.3-1.5-.5s-.9-.4-1.3-.6-.7-.3-.8-.5v-.4c0-.2 0-.3.1-.5 0-.2.1-.3.2-.5s.1-.2.2-.2h4.1c.6 0 1.1 0 1.5-.1l10.8-1c1-2 1.8-4.1 2.4-6.4H166c-.2 0-.5 0-.8.1-.3.1-.6.1-1 .2-.3.1-.6.2-.9.2s-.5.1-.6.1c-.2 0-.6-.1-1-.2-.5-.2-1-.4-1.5-.5-.5-.2-1-.4-1.4-.6-.4-.2-.7-.4-.9-.5 0-.5.1-.9.2-1.4.1-.5.3-.7.5-.7h.8c.5 0 1.1.1 1.8.1s1.4.1 2.1.1h10.9c.5 0 1-.1 1.6-.2.5-.2 1-.2 1.4-.2.4 0 .8 0 1.4.1.7.1 1.1.1 1.4.2zm12.2-6.1c.3.1.5.3.5.4.1.2.2.4.2.6 0 .3 0 .7-.1 1.3 0 .6-.1 1.1-.1 1.5l-.1 34.7c0 .9-.1 1.7-.2 2.6-.1.9-.3 1.7-.4 2.5s-.3 1.4-.5 2c-.2.6-.4 1-.6 1.3H189c-.1-.2-.3-.6-.4-1.1-.1-.5-.2-1-.3-1.7-.1-.6-.2-1.3-.2-2s-.1-1.4-.1-2.1V15c0-.3-.1-.6-.2-.8s-.3-.4-.5-.5l-2.8-2.2c.1-.4.2-.8.4-1.2.2-.4.5-.6.7-.6.3 0 .7.1 1.3.2.6.1 1.2.2 1.8.4.7.1 1.3.3 1.9.5.8.2 1.3.4 1.6.5z" class="st1"/></g><g class="st0"><path d="M146.7 11.3c.3.1.5.3.5.4.1.2.2.4.2.6 0 .3 0 .7-.1 1.3 0 .6-.1 1.1-.1 1.5l-.1 34.7c0 .9-.1 1.7-.2 2.6-.1.9-.3 1.7-.4 2.5s-.3 1.4-.5 2c-.2.6-.4 1-.6 1.3h-1.8c-.1-.2-.3-.6-.4-1.1-.1-.5-.2-1-.3-1.7-.1-.6-.1-1.3-.2-2 0-.7-.1-1.4-.1-2.1V37.5c-2 .5-4.4.9-7 1.2-2.6.3-5.3.7-7.9.9V47c0 2.2-.3 4.2-.8 5.8s-1.2 2.9-2 3.7l-2.2-.4c.1-.5.1-1 .2-1.8.1-.7.1-1.5.2-2.3 0-.8.1-1.7.1-2.5v-9.4l-5.2.3c-1.1.1-2 .2-3 .3-.9.2-1.6.2-2 .2-.2 0-.5-.1-1-.2-.5-.2-.9-.4-1.5-.6-.5-.2-1-.5-1.5-.8s-.9-.5-1.2-.7c0-.5.1-.9.2-1.3.2-.4.3-.6.5-.6h.6c.3 0 .7.1 1.1.1.5.1.9.1 1.5.2s1 .1 1.5.1h3.6c1.7 0 3.6-.1 5.8-.2s4.5-.3 6.8-.5c2.4-.2 4.7-.5 6.9-.8s4.3-.6 6-1V15c0-.3-.1-.6-.2-.8-.1-.2-.3-.4-.5-.5l-2.8-2.2c.1-.4.2-.8.5-1.2.2-.4.5-.6.7-.6.3 0 .7.1 1.3.2.6.1 1.2.2 1.8.4.6.1 1.2.3 1.8.5 1 .2 1.5.4 1.8.5zM125 31.8c-1.7 0-3.2-.2-4.5-.7-1.3-.5-2.5-1.1-3.4-1.9-1-.8-1.7-1.8-2.2-2.9-.5-1.2-.8-2.4-.8-3.8s.3-2.6.8-3.8c.5-1.1 1.3-2.1 2.2-3 .9-.8 2.1-1.5 3.4-2 1.4-.5 2.9-.7 4.5-.7 1.7 0 3.2.2 4.5.7 1.3.5 2.5 1.1 3.5 2 1 .8 1.7 1.8 2.2 3 .5 1.2.8 2.4.8 3.8s-.3 2.6-.8 3.8c-.5 1.1-1.3 2.1-2.2 2.9-1 .8-2.1 1.5-3.5 1.9-1.3.5-2.8.7-4.5.7zm0-15.3c-1.9 0-3.5.5-4.8 1.6-1.2 1.1-1.9 2.6-1.9 4.4 0 1.8.6 3.3 1.9 4.4 1.2 1.1 2.8 1.7 4.8 1.7 1 0 1.9-.1 2.7-.5.8-.3 1.5-.7 2.1-1.2.6-.5 1.1-1.2 1.4-1.9.3-.8.5-1.6.5-2.5 0-1.8-.6-3.3-1.9-4.4-1.2-1.1-2.8-1.6-4.8-1.6z" class="st2"/></g><g class="st0"><path d="M73 50c-.4 0-.8 0-1.4.1-.5.1-1.1.2-1.6.3-.5.1-.9.2-1.3.3-.4.1-.6.1-.8.1-.3 0-.7-.1-1.2-.2-.5-.2-1.1-.3-1.7-.6-.6-.2-1.2-.5-1.9-.8-.6-.3-1.1-.6-1.6-.8 0-.4.1-.8.2-1.3s.3-.8.6-.8c.2 0 .7 0 1.4.1.7 0 1.6.1 2.6.2s2 .1 3.2.2c1.1 0 2.2.1 3.3.1h23.7c1.1 0 2.1-.1 3-.4.9-.3 1.6-.5 2.1-.5.4 0 .8 0 1.3.1s1 .2 1.5.2c.5.1.9.2 1.3.3.4.1.6.2.7.4.1.2.2.4.2.7 0 .3.1.6 0 .9 0 .3-.1.6-.2.8-.1.3-.2.5-.2.6H73zm2.6-11.5c-1.5 0-2.8-.4-3.6-1.2-.9-.8-1.4-1.8-1.4-3.2l-.1-14.7c0-.4-.2-.8-.5-1.1-.1-.1-.3-.2-.7-.5-.4-.2-.8-.5-1.2-.7 0-.3.1-.7.2-1.2.2-.5.4-.7.6-.7H70c.5 0 1.1 0 1.7.1.6 0 1.2.1 1.9.1.6.1 1.1.1 1.5.1H90c.8 0 1.5-.1 2.2-.4.7-.2 1.4-.4 2-.4h1c.4 0 .7 0 1.1.1.4.1.7.1 1 .2.3.1.5.1.6.2.2.1.3.3.4.6.1.3.1.6 0 1 0 .3-.1.7-.2 1-.1.3-.3.5-.5.7H75.3v6.8h14.9c.7 0 1.3-.1 1.9-.3.6-.2 1.1-.3 1.6-.3h1.9c.7 0 1.2.1 1.6.3.2.1.4.2.4.5.1.3.2.6.2.9 0 .3-.1.6-.2 1-.1.3-.3.6-.5.8H75.3v5.4c0 .6.2 1.1.5 1.3.3.2.8.3 1.3.3h13.4c.9 0 1.6-.1 2.4-.4.7-.2 1.3-.4 1.9-.4h1c.4 0 .8 0 1.1.1.4 0 .7.1 1 .2.3.1.6.2.7.2.2.1.3.3.4.6.1.3.1.6 0 1 0 .4-.1.7-.2 1-.1.3-.2.5-.3.7h-6.7l-16.2.3z" class="st2"/></g><g class="st0"><path d="M100.5 18c.4-.2.7-.5 1.1-.8.3-.3.6-.7.8-1 .2-.4.3-.7.4-1.1s.1-.7-.1-1c-.2-.3-.5-.5-.9-.6-.4-.1-.9-.3-1.3-.5 0-.2 0-.5.1-.8s.2-.5.3-.7c.1-.2.3-.4.5-.5.2-.1.5-.2.8-.2.6 0 1.1.2 1.4.6.3.4.6.8.7 1.3.1.5.2 1 .1 1.5 0 .6-.2 1.1-.4 1.7-.2.6-.6 1.1-1.1 1.7-.5.6-1.1 1-1.9 1.5-.3-.1-.5-.2-.6-.5 0-.4 0-.5.1-.6zm5.4 0c.4-.2.7-.5 1.1-.8.3-.3.6-.7.8-1 .2-.4.3-.7.4-1.1.1-.4.1-.7-.1-1-.2-.3-.5-.5-.9-.6-.4-.1-.9-.3-1.3-.5 0-.2 0-.5.1-.8.1-.3.2-.5.3-.7.1-.2.3-.4.5-.5.2-.1.5-.2.8-.2.6 0 1.1.2 1.4.6.3.4.6.8.7 1.3.1.5.2 1 .1 1.5 0 .6-.2 1.1-.4 1.7-.2.6-.6 1.1-1.1 1.7-.5.6-1.1 1-1.9 1.5-.3-.1-.5-.2-.6-.5s-.1-.5.1-.6z" class="st3"/></g><g class="st0"><path d="M12.3 11.8c-.4.2-.7.5-1.1.8-.3.3-.6.7-.8 1s-.3.7-.4 1.1c-.1.4 0 .7.1 1 .1.3.4.5.9.6s.9.3 1.4.5c0 .3 0 .5-.1.8-.1.3-.2.5-.3.7-.1.2-.3.4-.6.5s-.5.2-.8.2c-.6 0-1.1-.2-1.4-.6-.3-.4-.6-.8-.7-1.3-.1-.4-.2-1-.2-1.5 0-.6.2-1.1.4-1.7.3-.6.6-1.1 1.1-1.7s1.1-1 1.9-1.5c.3.1.5.3.6.5.1.4.1.5 0 .6zm5.3 0c-.4.2-.7.5-1.1.8-.3.3-.6.7-.8 1s-.3.7-.4 1.1c-.1.4-.1.7.1 1 .1.3.4.5.9.6s.9.3 1.4.5c0 .3 0 .5-.1.8-.1.3-.2.5-.3.7-.1.2-.3.4-.6.5-.2.1-.5.2-.8.2-.6 0-1.1-.2-1.4-.6-.3-.4-.6-.8-.7-1.3-.1-.4-.2-1-.1-1.5 0-.6.2-1.1.4-1.7.2-.6.6-1.1 1.1-1.7s1.1-1 1.9-1.5c.3.1.5.3.6.5s.1.5-.1.6z" class="st3"/></g></svg>
            </a>

            <!--<div class="main-header-category-container">
                <span class="main-header-category-divider">class="login-header-profile-icon bi bi-person-circle"</span>
                <a class="main-header-category-items">발언</a>
                <span class="main-header-category-divider">|</span>
                <a class="main-header-category-items">인물</a>
            </div>-->
        </div>


        <div class="d-flex align-items-center">
            <!-- 검색창 -->
            <div class="main-search-bar-container">
                <div id="main-search-bar" class="main-search-form d-flex align-items-center">
                    <button class="main-search-button">
                        <i class="main-search-button-icon bi bi-search"></i>
                    </button>
                    <input id="search-input" class="main-search-bar-input form-control" maxlength="100" placeholder="검색어를 입력하세요."
                           th:value="${keyword}" autocomplete="off">
                    <input id="tab" name="tab" type="hidden" value="1">
                </div>
                <a class="close-search-bar-btn">
                    <i class="close-search-bar-btn-icon bi bi-x-lg"></i>
                </a>
            </div>

            <a class="open-search-bar-btn">
                <i class="open-search-bar-btn-icon bi bi-search"></i>
            </a>

            <div th:if="${session.user==null}">
                <a href="/oauth_login" id="mobile-login-btn" class="main-header-mobile-login-btn">
                    <i class="login-header-login-icon bi bi-person" style="display: none"></i>
                </a>
            </div>

            <div sec:authorize="isAuthenticated()" class="login-header-profile main-header-profile flex-shrink-0 dropdown">
                 <a href="#" class="login-header-profile-link d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser2"
                    data-bs-toggle="dropdown" aria-expanded="false">
                     </i><span class="login-header-profile-nickname" th:text="${session.user.nickname}"></span>
                     <i class="login-header-profile-icon bi bi-person-circle" style="display: none; color: #ccc"></i>
                 </a>
                 <ul class="login-header-profile-dropdown dropdown-menu dropdown-menu-end" aria-labelledby="dropdownUser2">
                     <li><a class="dropdown-item my" href="/profile"><i class="fas fa-user-circle main-header-profile-btn-icon"></i><span class="login-header-profile-dropdown-info" th:text="${session.user.nickname}"></span></a></li>
                     <li><hr sec:authorize="hasRole('ADMIN')" class="dropdown-divider">
                     <li><a sec:authorize="hasRole('ADMIN')" class="dropdown-item" href="/admin/setting-icons">관리자 페이지</a></li>
                     <li><hr sec:authorize="hasRole('ADMIN')" class="dropdown-divider">
                     <li><a sec:authorize="hasRole('ADMIN')" class="dropdown-item" href="/admin/person">인물목록</a></li>
                     <li><a sec:authorize="hasRole('ADMIN')" class="dropdown-item" href="/admin/person/new">인물등록</a></li>
                     <li><a sec:authorize="hasRole('ADMIN')" class="dropdown-item" href="/remark/new">발언등록</a></li>
                     <li><hr sec:authorize="hasRole('ADMIN')" class="dropdown-divider"></li>
                     <li><a class="dropdown-item" href="/logout">로그아웃</a></li>
                 </ul>
             </div>

            <div sec:authorize="isAuthenticated()">
                <input type="hidden" th:value="${session.user.id}" id="user_id">
            </div>
        </div>

        <script>
            function searchValidate(keyword) {
                const len = keyword.length;
                return len >= 1;
            }

            function searchFromConsole(){
                let keyword = searchInput.value.trim();
                if(searchValidate(keyword)){
                    location.href = '/remark?keyword='+keyword+'&tab=1';
                }
            }

            const searchConsoleBtn = document.querySelector(".main-search-button");
            searchConsoleBtn.addEventListener("click", searchFromConsole);
            const searchInput = document.getElementById("search-input");
            searchInput.addEventListener("keyup", function (e){
                if(e.key === "Enter" || e.keyCode === 13){
                    searchFromConsole()
                }
            })

        </script>
        <script>
            function openSearchConsole(){
                const cont = document.querySelector(".main-search-bar-container");
                let display = window.getComputedStyle(cont).display;
                if(display === 'none'){
                    cont.style.display = 'flex'
                    document.querySelector(".main-search-bar-input").focus();
                    const input = document.getElementById("search-input");
                    let searchKeyword = input.value;
                    input.value = "";
                    input.value = searchKeyword;
                }else{
                    cont.style.display = 'none';
                }
            }

            const closeSearchBarBtn = document.querySelector(".close-search-bar-btn");
            const openSearchBarBtn = document.querySelector(".open-search-bar-btn")
            closeSearchBarBtn.addEventListener("click",openSearchConsole);
            openSearchBarBtn.addEventListener("click",openSearchConsole);
        </script>

    </div>
</header>
