<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<html xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:replace="fragments/header :: header">
<body>
<div th:replace="fragments/topHeader :: topHeader"/>

<div class="container container-custom">
    <div class="remark-page-wrap" style="margin-top: 4rem;">

        <div id="r-l-table-container">
            <div id="r-l-table">
                <div class="r-l-t-row-container r-d-t-row-container row" th:object="${remark}">
                    <div class="r-l-t-first-row-container d-flex justify-content-between">

                        <div class="r-l-t-picture-container r-l-t-first-col">
                            <div class="r-l-t-picture-wrap">
                                <a class="r-l-t-picture-link r-d-t-picture-link d-flex align-items-center justify-content-center"
                                   th:href="@{/person/{personId}(personId=*{personId})}">
                                    <i class="r-l-t-picture r-d-t-picture fas fa-user-alt" style='font-size: 1.4rem; color: white'></i>
                                </a>
                            </div>
                        </div>

                        <div class="r-l-t-title-container r-l-t-second-col col">
                            <div class="r-l-t-person-and-date-container">
                                <!-- 이름 -->
                                <div>
                                <a class="r-d-t-person-name-link"
                                   th:href="@{/remark(keyword=*{name},personId=*{personId})}">
                                    <span class="r-l-t-person-name r-d-t-person-name" th:text="*{name}"></span>
                                </a>
                                </div>
                                <!-- 다른이름, 직업, 날짜 -->
                                <div class="d-flex align-items-center" style="flex-wrap: wrap;">
                                <div class="r-d-t-person-alias-and-job-container">
                                    <span class="r-d-t-person-alias " th:if="*{not #strings.isEmpty(alias)}"
                                      th:text="|*{alias},|"></span>
                                    <span class="r-d-t-person-job" th:text="*{job}"></span>
                                </div>
                                    <div class="r-d-t-date-container" style="margin: 0 .25rem;">
                                        <span class="r-d-t-date">·</span>
                                    </div>
                                <div class="r-d-t-date-container">
                                    <span class="r-d-t-date" th:text="|*{remarkDate}|"></span>
                                </div>
                                </div>

                            </div>
                            <div class="r-d-t-tag-container d-flex align-items-top">
                                <div class="r-l-t-tags-wrap">
                                    <a class="r-l-t-tags" th:each="tag : *{remarkTagList}"
                                       th:href="@{/remark(keyword=${tag.name}, tab=3)}">
                                        <span th:text="|#${tag.name}|"></span>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="r-l-t-first-row-third-col col-1 d-flex justify-content-end">
                        <span class="r-l-t-info tt" data-bs-html="true" data-bs-placement="bottom"
                              th:title="|<div class='d-flex align-items-center justify-content-center'>
                                <img src=*{picture} width='20' height='20' class='r-l-t-info-picture rounded-circle'><span class='r-l-t-info-nickname'>*{nickname}</span>
                                </div>
                                <div><span class='r-l-t-info-date'>*{createdDate} 등록됨</span></div>|">
                            <i class="r-l-t-info-icon fas fa-info-circle"></i>
                        </span>
                        </div>

                    </div>

                    <div class="r-l-t-second-row-container d-flex">

                        <div class="r-l-t-quote-icon-container r-l-t-first-col col-1">
                            <div class="r-l-t-quote-icon-wrap">
                                <i class="r-l-t-quote-icon fas fa-quote-left" style="margin-right: 0"></i>
                            </div>
                        </div>

                        <div class="r-l-t-content-container r-l-t-second-col">
                            <pre class="r-l-t-content r-d-t-content"
                                 th:utext="|*{content} <i class='r-l-t-quote-icon fas fa-quote-right'></i>|"></pre>
                        </div>

                    </div>

                    <div class="r-l-t-last-row-container d-flex justify-content-center">

                        <div class="r-l-t-last-row-btn-container" style="margin-left: 0">
                            <a sec:authorize="isAuthenticated()" th:if="*{isLike eq 1}" th:id="|like-btn-*{remarkId}|"
                               class="r-l-t-like-btn like-btn r-l-t-last-row-btn btn like-active" href="javascript:;"
                               th:onclick="|like(this, *{remarkId}, 1)|">
                                <i class="r-l-t-like-icon like-icon r-l-t-last-row-btn-icon far fa-thumbs-up fas"></i>
                                <span th:id="|like-count-*{remarkId}|"
                                      class="r-l-t-last-row-btn-text r-l-t-last-row-like-count like-count"
                                      th:text="*{likeCount}"></span>
                            </a>

                            <a th:unless="*{isLike eq 1}" th:id="|like-btn-*{remarkId}|"
                               class="r-l-t-like-btn like-btn r-l-t-last-row-btn btn" href="javascript:;"
                               th:onclick="|like(this, *{remarkId}, 1)|">
                                <i class="r-l-t-like-icon like-icon r-l-t-last-row-btn-icon far fa-thumbs-up"></i>
                                <span th:id="|like-count-*{remarkId}|"
                                      class="r-l-t-last-row-btn-text r-l-t-last-row-like-count like-count"
                                      th:text="*{likeCount}"></span>
                            </a>
                        </div>

                        <div class="r-l-t-last-row-btn-container">
                            <a sec:authorize="isAuthenticated()" th:if="*{isLike eq -1}"
                               th:id="|dislike-btn-*{remarkId}|"
                               class="r-l-t-dislike-btn dislike-btn r-l-t-last-row-btn btn like-active" href="javascript:;"
                               th:onclick="|like(this, *{remarkId}, -1)|">
                                <i class="r-l-t-dislike-icon dislike-icon r-l-t-last-row-btn-icon far fa-thumbs-down fas"></i>
                                <span th:id="|dislike-count-*{remarkId}|"
                                      class="r-l-t-last-row-btn-text r-l-t-last-row-dislike-count dislike-count"
                                      th:text="*{dislikeCount}"></span>
                            </a>
                            <a th:unless="*{isLike eq -1}" th:id="|dislike-btn-*{remarkId}|"
                               class="r-l-t-dislike-btn dislike-btn r-l-t-last-row-btn btn" href="javascript:;"
                               th:onclick="|like(this, *{remarkId}, -1)|">
                                <i class="r-l-t-dislike-icon dislike-icon r-l-t-last-row-btn-icon far fa-thumbs-down"></i>
                                <span th:id="|dislike-count-*{remarkId}|"
                                      class="r-l-t-last-row-btn-text r-l-t-last-row-dislike-count dislike-count"
                                      th:text="*{dislikeCount}"></span>
                            </a>
                        </div>

                        <div class="r-l-t-last-row-btn-container d-flex align-items-center">
                            <a class="r-l-t-share-btn share-btn r-l-t-last-row-btn btn" href=""
                               th:onclick="|openShareModal(this, *{remarkId})|"
                               th:data-name="*{name}" th:data-date="*{createdDate}"
                               data-bs-toggle="modal" data-bs-target="#shareModal">
                                <div class="d-flex align-items-center">
                                    <i class="r-l-t-last-row-btn-icon fas fa-share"></i>
                                    <span class="r-l-t-last-row-btn-text r-l-t-last-row-btn-text-right">공유</span>
                                </div>
                            </a>
                        </div>

                        <div th:if="*{not #strings.isEmpty(sourceSort)}"
                             class="r-l-t-last-row-btn-container d-flex align-items-center">
                            <a class="r-l-t-source-btn source-btn r-l-t-last-row-btn btn" th:href="*{sourceUrl}"
                               target="_blank" rel="noopener">
                                <div class="d-flex align-items-center">
                                    <i class="r-l-t-last-row-btn-icon fas fa-play-circle"
                                       th:if="*{sourceSort.toString().equals('영상')}"></i>
                                    <i class="r-l-t-last-row-btn-icon fas fa-mobile-alt"
                                       th:if="*{sourceSort.toString().equals('SNS')}"></i>
                                    <i class="r-l-t-last-row-btn-icon fas fa-mobile-alt"
                                       th:if="*{sourceSort.toString().equals('기사')}"></i>

                                    <span class="r-l-t-last-row-btn-text r-l-t-last-row-btn-text-right">출처</span>
                                </div>
                            </a>
                        </div>

                    </div>

                    <!--<div class="r-d-t-footer-container d-flex justify-content-end"
                         style="border-top: 1px solid #eee; margin-top: 1rem;">

                        <div class="r-d-t-footer-">

                        </div>

                    </div>-->

                </div>
            </div>



        </div>


        <!-- 발언인 검색-->
        <!--<div class="remark-detail-person-search d-flex align-items-center justify-content-end"
             style="margin-top: 1rem; margin-bottom: .5rem;">
            <a th:href="@{/remark/search(keyword=*{person.name},personId=*{person.id},tab=2)}">
                <span class="" th:text="|*{person.name}의 발언 보러가기|"></span>
                <i class="fas fa-arrow-circle-right remark-detail-person-search-icon"></i>
            </a>
        </div>-->


        <div class="d-flex justify-content-end" style="margin-bottom: 1rem;">
            <div sec:authorize="hasRole('ADMIN')"
                 class="remark-delete-and-update-btn-wrap d-flex align-items-center">
                <!-- 수정 버튼 -->
                <a class="btn btn-outline-secondary btn-sm me-2"
                   th:href="@{/remark/{remarkId}/update(remarkId=*{remarkId})}">수정</a>
                <!-- 삭제 버튼 -->
                <button class="btn btn-outline-danger btn-sm btn-delete me-2"
                        th:onclick="|deleteRemark(*{remarkId})|">삭제
                </button>
            </div>
            <a class="btn btn-outline-secondary btn-sm me-2" href="javascript:toList();">목록</a>
        </div>
    </div>
</div>
</div>
<!-- Modal -->
<div th:replace="fragments/shareModal :: shareModal"/>
<div th:replace="fragments/footer :: footer"/>
<script>
    function toList() {
        window.location.href = '/remark';
    }
</script>
</body>
</html>